--- a/command/decoder.cpp	2012-01-19 07:42:20.789566941 +0100
+++ b/command/decoder.cpp	2012-01-19 07:45:48.472893379 +0100
@@ -22,16 +22,15 @@
 
 #include "decoder.h"
 
-#ifndef AVMEDIA_TYPE_AUDIO
-#define AVMEDIA_TYPE_AUDIO CODEC_TYPE_AUDIO
-#endif
-
-#ifndef AVMEDIA_TYPE_VIDEO
-#define AVMEDIA_TYPE_VIDEO CODEC_TYPE_VIDEO
-#endif
-
-#ifndef AVMEDIA_TYPE_UNKNOWN
-#define AVMEDIA_TYPE_UNKNOWN CODEC_TYPE_UNKNOWN
+#if LIBAVCODEC_VERSION_INT < AV_VERSION_INT(52,64,0)
+#define AVMediaType		CodecType
+#define AVMEDIA_TYPE_UNKNOWN    CODEC_TYPE_UNKNOWN
+#define AVMEDIA_TYPE_VIDEO      CODEC_TYPE_VIDEO
+#define AVMEDIA_TYPE_AUDIO      CODEC_TYPE_AUDIO
+#define AVMEDIA_TYPE_DATA       CODEC_TYPE_DATA
+#define AVMEDIA_TYPE_SUBTITLE   CODEC_TYPE_SUBTITLE
+#define AVMEDIA_TYPE_ATTACHMENT CODEC_TYPE_ATTACHMENT
+#define AVMEDIA_TYPE_NB         CODEC_TYPE_NB
 #endif
 
 #include "decoder.h"
